
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url = env("DATABASE_URL")
}


model Pesquisadores {

  id_Pesquisador        Int      @id @default(autoincrement())
  email   String   @unique
  name    String @db.VarChar(60)
  cpf String @unique @db.VarChar(14)
  senha String @db.VarChar(60)
  createdAt  DateTime   @default(now())
  updatedAt  DateTime   @updatedAt
  Roles Role @relation(fields: [roleId], references: [id])
  roleId Int  
  
  estado Estado[] @relation("pesquisador")
  municipio municipio[] @relation("pesquisador")
}

model Role {
  id        Int      @id @default(autoincrement())
  Role      String
  createdAt  DateTime   @default(now())
  updatedAt  DateTime   @updatedAt
  role Pesquisadores[]
}


model Candidato {
   id_candidato Int @id @default(autoincrement())
   name    String @db.VarChar(60) 
   apelido String? @db.VarChar(60) 
   images Images[] 

    uf Estado[] @relation("candidato")
    muni municipio[] @relation("candidato")
    votos Votos[]
}

model municipio {
  idMunicipio Int  @id @default(autoincrement())
  Municipio String
  id_pesquisador Int
  pesquisador Pesquisadores @relation( "pesquisador",fields: [id_pesquisador], references: [id_Pesquisador])
  id_Candidato Int
  candidato Candidato @relation( "candidato",fields: [id_Candidato], references: [id_candidato])

}

model Estado {
  id_Estado Int @id @default(autoincrement())
  Estado String 
  uf String @db.VarChar(2)
  id_pesquisador Int
  pesquisador Pesquisadores @relation( "pesquisador",fields: [id_pesquisador], references: [id_Pesquisador])
  id_Candidato Int
  candidato Candidato @relation( "candidato",fields: [id_Candidato], references: [id_candidato])


}


model Images {
  id Int  @id @default(autoincrement())
  Url String 
  perfil Candidato @relation(fields: [FotoId], references: [id_candidato])
  FotoId Int
}


model Votos {
  id_voto Int @id @default(autoincrement())
  sim Boolean?
  nao Boolean?
  nulo Boolean?
  id_voto_candidato Int
  candidato Candidato @relation(fields: [id_voto_candidato], references: [id_candidato])
}

